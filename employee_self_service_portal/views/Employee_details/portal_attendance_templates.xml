<odoo>
    <template id="portal_attendance" name="My Attendance">
        <t t-call="portal.portal_layout">
            <div class="o_portal">
                <h2>Attendance</h2>
                <div class="mb-3 d-flex gap-2">
                    <form action="/my/employee/attendance/checkin" method="post" style="display:inline;">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <button type="submit" class="btn btn-success" t-att-disabled="today_att and not today_att.check_out">Check In</button>
                    </form>
                    <form action="/my/employee/attendance/checkout" method="post" style="display:inline;">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <button type="submit" class="btn btn-danger" t-att-disabled="not today_att or today_att.check_out">Check Out</button>
                    </form>
                </div>
                <t t-if="today_att">
                    <div class="card mb-3 border-info">
                        <div class="card-body">
                            <h5 class="card-title mb-2">Today's Attendance</h5>
                            <div class="row">
                                <div class="col-md-3"><b>Check-In:</b> <t t-esc="today_att.check_in"/></div>
                                <div class="col-md-3"><b>Check-Out:</b> <t t-esc="today_att.check_out or '-'"/></div>
                                <div class="col-md-3"><b>Worked Hours:</b> <t t-esc="today_att.worked_hours or '-'"/></div>
                            </div>
                            <div class="mt-2">
                                <t t-if="today_att.check_out">
                                    <span class="badge bg-success">Checked Out</span>
                                </t>
                                <t t-elif="today_att.check_in">
                                    <span class="badge bg-warning text-dark">Checked In</span>
                                </t>
                                <t t-else="">
                                    <span class="badge bg-secondary">No Attendance</span>
                                </t>
                            </div>
                        </div>
                    </div>
                </t>
                <h4>Recent Attendances</h4>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Check-In Time</th>
                            <th>Check-In Location</th>
                            <th>Check-Out Time</th>
                            <th>Check-Out Location</th>
                            <th>Worked Hours</th>
                        </tr>
                    </thead>
                    <tbody>
                      <t t-foreach="attendances" t-as="att">
                        <tr>
                          <!-- Date -->
                          <td>
                            <t t-if="att.check_in">
                              <t t-esc="att.check_in.strftime('%d/%m/%Y')"/>
                            </t>
                            <t t-else="">-</t>
                          </td>
                          <!-- Check-In Time -->
                          <td>
                            <t t-if="att.check_in">
                              <t t-esc="att.check_in.strftime('%I:%M:%S %p')"/>
                            </t>
                            <t t-else="">-</t>
                          </td>
                          <!-- Check-In Location -->
                          <td>-</td>
                          <!-- Check-Out Time -->
                          <td>
                            <t t-if="att.check_out">
                              <t t-esc="att.check_out.strftime('%I:%M:%S %p')"/>
                            </t>
                            <t t-else="">-</t>
                          </td>
                          <!-- Check-Out Location -->
                          <td>-</td>
                          <!-- Worked Hours -->
                          <td><t t-esc="att.worked_hours or '-'"/></td>
                        </tr>
                      </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
</odoo>
